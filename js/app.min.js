(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

require('./modules/nav');

require('./modules/tabs');

jQuery(document).ready(function ($) {
    smoothScroll.init({
        selector: '[data-scroll]',
        speed: 1000 });
    $(".fancybox-media").fancybox({
        openEffect: 'none',
        closeEffect: 'none',
        helpers: {
            media: {}
        }
    });
    $(".economes-popup").fancybox({
        maxWidth: 500,
        maxHeight: 400,
        fitToView: false,
        width: '500px',
        height: '400px',
        autoSize: false,
        closeClick: false,
        openEffect: 'none',
        closeEffect: 'none'
    });
    var s = skrollr.init({ forceHeight: false });
});

},{"./modules/nav":2,"./modules/tabs":3}],2:[function(require,module,exports){
'use strict';

// page init
jQuery(function () {
    initMobileNav();
});

// mobile menu init
function initMobileNav() {
    jQuery('body').mobileNav({
        hideOnClickOutside: true,
        menuActiveClass: 'nav-active',
        menuOpener: '.menu-opener',
        menuDrop: '.nav-drop'
    });
}

/*
 * Simple Mobile Navigation
 */
;(function ($) {
    function MobileNav(options) {
        this.options = $.extend({
            container: null,
            hideOnClickOutside: false,
            menuActiveClass: 'nav-active',
            menuOpener: '.nav-opener',
            menuDrop: '.nav-drop',
            toggleEvent: 'click',
            outsideClickEvent: 'click touchstart pointerdown MSPointerDown'
        }, options);
        this.initStructure();
        this.attachEvents();
    }
    MobileNav.prototype = {
        initStructure: function initStructure() {
            this.page = $('html');
            this.container = $(this.options.container);
            this.opener = this.container.find(this.options.menuOpener);
            this.drop = this.container.find(this.options.menuDrop);
        },
        attachEvents: function attachEvents() {
            var self = this;

            if (activateResizeHandler) {
                activateResizeHandler();
                activateResizeHandler = null;
            }

            this.outsideClickHandler = function (e) {
                if (self.isOpened()) {
                    var target = $(e.target);
                    if (!target.closest(self.opener).length && !target.closest(self.drop).length) {
                        self.hide();
                    }
                }
            };

            this.openerClickHandler = function (e) {
                e.preventDefault();
                self.toggle();
            };

            this.opener.on(this.options.toggleEvent, this.openerClickHandler);
        },
        isOpened: function isOpened() {
            return this.container.hasClass(this.options.menuActiveClass);
        },
        show: function show() {
            this.container.addClass(this.options.menuActiveClass);
            if (this.options.hideOnClickOutside) {
                this.page.on(this.options.outsideClickEvent, this.outsideClickHandler);
            }
        },
        hide: function hide() {
            this.container.removeClass(this.options.menuActiveClass);
            if (this.options.hideOnClickOutside) {
                this.page.off(this.options.outsideClickEvent, this.outsideClickHandler);
            }
        },
        toggle: function toggle() {
            if (this.isOpened()) {
                this.hide();
            } else {
                this.show();
            }
        },
        destroy: function destroy() {
            this.container.removeClass(this.options.menuActiveClass);
            this.opener.off(this.options.toggleEvent, this.clickHandler);
            this.page.off(this.options.outsideClickEvent, this.outsideClickHandler);
        }
    };

    var activateResizeHandler = function activateResizeHandler() {
        var win = $(window),
            doc = $('html'),
            resizeClass = 'resize-active',
            flag,
            timer;
        var removeClassHandler = function removeClassHandler() {
            flag = false;
            doc.removeClass(resizeClass);
        };
        var resizeHandler = function resizeHandler() {
            if (!flag) {
                flag = true;
                doc.addClass(resizeClass);
            }
            clearTimeout(timer);
            timer = setTimeout(removeClassHandler, 500);
        };
        win.on('resize orientationchange', resizeHandler);
    };

    $.fn.mobileNav = function (options) {
        return this.each(function () {
            var params = $.extend({}, options, { container: this }),
                instance = new MobileNav(params);
            $.data(this, 'MobileNav', instance);
        });
    };
})(jQuery);

},{}],3:[function(require,module,exports){
'use strict';

// page init
jQuery(function () {
	initTabs();
});

// content tabs init
function initTabs() {
	jQuery('ul.tabset').tabset({
		tabLinks: 'a',
		defaultTab: false
	});
}

/*
 * jQuery Tabs plugin
 */

;(function ($, $win) {
	'use strict';

	function Tabset($holder, options) {
		this.$holder = $holder;
		this.options = options;

		this.init();
		this.makeCallback('onInit', this);
	}

	Tabset.prototype = {
		init: function init() {
			this.$tabLinks = this.$holder.find(this.options.tabLinks);

			this.setStartActiveIndex();
			this.setActiveTab();

			if (this.options.autoHeight) {
				this.$tabHolder = $(this.$tabLinks.eq(0).attr(this.options.attrib)).parent();
			}
		},

		setStartActiveIndex: function setStartActiveIndex() {
			var $classTargets = this.getClassTarget(this.$tabLinks);
			var $activeLink = $classTargets.filter('.' + this.options.activeClass);
			var $hashLink = this.$tabLinks.filter('[' + this.options.attrib + '="' + location.hash + '"]');
			var activeIndex;

			if (this.options.checkHash && $hashLink.length) {
				$activeLink = $hashLink;
			}

			activeIndex = $classTargets.index($activeLink);

			this.activeTabIndex = this.prevTabIndex = activeIndex === -1 ? this.options.defaultTab ? 0 : null : activeIndex;
		},

		setActiveTab: function setActiveTab() {
			var self = this;

			this.$tabLinks.each(function (i, link) {
				var $link = $(link);
				var $classTarget = self.getClassTarget($link);
				var $tab = $($link.attr(self.options.attrib));

				if (i !== self.activeTabIndex) {
					$classTarget.removeClass(self.options.activeClass);
					$tab.addClass(self.options.tabHiddenClass).removeClass(self.options.activeClass);
				} else {
					$classTarget.addClass(self.options.activeClass);
					$tab.removeClass(self.options.tabHiddenClass).addClass(self.options.activeClass);
				}

				self.attachTabLink($link, i);
			});
		},

		attachTabLink: function attachTabLink($link, i) {
			var self = this;

			$link.on(this.options.event + '.tabset', function (e) {
				e.preventDefault();

				if (self.activeTabIndex === self.prevTabIndex && self.activeTabIndex !== i) {
					self.activeTabIndex = i;
					self.switchTabs();
				}
			});
		},

		resizeHolder: function resizeHolder(height) {
			var self = this;

			if (height) {
				this.$tabHolder.height(height);
				setTimeout(function () {
					self.$tabHolder.addClass('transition');
				}, 10);
			} else {
				self.$tabHolder.removeClass('transition').height('');
			}
		},

		switchTabs: function switchTabs() {
			var self = this;

			var $prevLink = this.$tabLinks.eq(this.prevTabIndex);
			var $nextLink = this.$tabLinks.eq(this.activeTabIndex);

			var $prevTab = this.getTab($prevLink);
			var $nextTab = this.getTab($nextLink);

			$prevTab.removeClass(this.options.activeClass);

			if (self.haveTabHolder()) {
				this.resizeHolder($prevTab.outerHeight());
			}

			setTimeout(function () {
				self.getClassTarget($prevLink).removeClass(self.options.activeClass);

				$prevTab.addClass(self.options.tabHiddenClass);
				$nextTab.removeClass(self.options.tabHiddenClass).addClass(self.options.activeClass);

				self.getClassTarget($nextLink).addClass(self.options.activeClass);

				if (self.haveTabHolder()) {
					self.resizeHolder($nextTab.outerHeight());

					setTimeout(function () {
						self.resizeHolder();
						self.prevTabIndex = self.activeTabIndex;
					}, self.options.animSpeed);
				} else {
					self.prevTabIndex = self.activeTabIndex;
				}
				// onchange callback
				self.makeCallback('onChange', self, $nextLink);
			}, this.options.autoHeight ? this.options.animSpeed : 1);
		},

		getClassTarget: function getClassTarget($link) {
			return this.options.addToParent ? $link.parent() : $link;
		},

		getActiveTab: function getActiveTab() {
			return this.getTab(this.$tabLinks.eq(this.activeTabIndex));
		},

		getTab: function getTab($link) {
			return $($link.attr(this.options.attrib));
		},

		haveTabHolder: function haveTabHolder() {
			return this.$tabHolder && this.$tabHolder.length;
		},

		makeCallback: function makeCallback(name) {
			if (typeof this.options[name] === 'function') {
				var args = Array.prototype.slice.call(arguments);
				args.shift();
				this.options[name].apply(this, args);
			}
		},

		destroy: function destroy() {
			var self = this;

			this.$tabLinks.off('.tabset').each(function () {
				var $link = $(this);

				self.getClassTarget($link).removeClass(self.options.activeClass);
				$($link.attr(self.options.attrib)).removeClass(self.options.activeClass + ' ' + self.options.tabHiddenClass);
			});

			this.$holder.removeData('Tabset');
		}
	};

	$.fn.tabset = function (options) {
		options = $.extend({
			activeClass: 'active',
			addToParent: false,
			autoHeight: false,
			checkHash: false,
			defaultTab: true,
			animSpeed: 500,
			tabLinks: 'a',
			attrib: 'href',
			event: 'click',
			tabHiddenClass: 'js-tab-hidden'
		}, options);
		options.autoHeight = options.autoHeight && $.support.opacity;

		return this.each(function () {
			var $holder = $(this);

			if (!$holder.data('Tabset')) {
				$holder.data('Tabset', new Tabset($holder, options));
			}
		});
	};
})(jQuery, jQuery(window));

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFxhcHAuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFxuYXYuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFx0YWJzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQTs7QUFDQTs7QUFFQSxPQUFPLFFBQVAsRUFBaUIsS0FBakIsQ0FBdUIsVUFBUyxDQUFULEVBQVk7QUFDL0IsaUJBQWEsSUFBYixDQUFrQjtBQUNkLGtCQUFVLGVBREk7QUFFZCxlQUFPLElBRk8sRUFBbEI7QUFJQSxNQUFFLGlCQUFGLEVBQXFCLFFBQXJCLENBQThCO0FBQzFCLG9CQUFZLE1BRGM7QUFFMUIscUJBQWEsTUFGYTtBQUcxQixpQkFBUztBQUNMLG1CQUFPO0FBREY7QUFIaUIsS0FBOUI7QUFPQSxNQUFFLGlCQUFGLEVBQXFCLFFBQXJCLENBQThCO0FBQzFCLGtCQUFjLEdBRFk7QUFFMUIsbUJBQWMsR0FGWTtBQUcxQixtQkFBYyxLQUhZO0FBSTFCLGVBQWMsT0FKWTtBQUsxQixnQkFBYyxPQUxZO0FBTTFCLGtCQUFjLEtBTlk7QUFPMUIsb0JBQWMsS0FQWTtBQVExQixvQkFBYyxNQVJZO0FBUzFCLHFCQUFjO0FBVFksS0FBOUI7QUFXQSxRQUFJLElBQUksUUFBUSxJQUFSLENBQWEsRUFBQyxhQUFhLEtBQWQsRUFBYixDQUFSO0FBQ0gsQ0F4QkQ7Ozs7O0FDSEE7QUFDQSxPQUFPLFlBQVU7QUFDYjtBQUNILENBRkQ7O0FBSUE7QUFDQSxTQUFTLGFBQVQsR0FBeUI7QUFDckIsV0FBTyxNQUFQLEVBQWUsU0FBZixDQUF5QjtBQUNyQiw0QkFBb0IsSUFEQztBQUVyQix5QkFBaUIsWUFGSTtBQUdyQixvQkFBWSxjQUhTO0FBSXJCLGtCQUFVO0FBSlcsS0FBekI7QUFNSDs7QUFFRDs7O0FBR0EsQ0FBRSxXQUFTLENBQVQsRUFBWTtBQUNWLGFBQVMsU0FBVCxDQUFtQixPQUFuQixFQUE0QjtB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USxNQVJVO0FBU2xCLFVBQU8sT0FUVztBQVVsQixtQkFBZ0I7QUFWRSxHQUFULEVBV1AsT0FYTyxDQUFWO0FBWUEsVUFBUSxVQUFSLEdBQXFCLFFBQVEsVUFBUixJQUFzQixFQUFFLE9BQUYsQ0FBVSxPQUFyRDs7QUFFQSxTQUFPLEtBQUssSUFBTCxDQUFVLFlBQVc7QUFDM0IsT0FBSSxVQUFVLEVBQUUsSUFBRixDQUFkOztBQUVBLE9BQUksQ0FBQyxRQUFRLElBQVIsQ0FBYSxRQUFiLENBQUwsRUFBNkI7QUFDNUIsWUFBUSxJQUFSLENBQWEsUUFBYixFQUF1QixJQUFJLE1BQUosQ0FBVyxPQUFYLEVBQW9CLE9BQXBCLENBQXZCO0FBQ0E7QUFDRCxHQU5NLENBQVA7QUFPQSxFQXRCRDtBQXVCQSxDQXZMQyxFQXVMQSxNQXZMQSxFQXVMUSxPQUFPLE1BQVAsQ0F2TFIsQ0FBRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgJy4vbW9kdWxlcy9uYXYnO1xyXG5pbXBvcnQgJy4vbW9kdWxlcy90YWJzJztcclxuXHJcbmpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oJCkge1xyXG4gICAgc21vb3RoU2Nyb2xsLmluaXQoe1xyXG4gICAgICAgIHNlbGVjdG9yOiAnW2RhdGEtc2Nyb2xsXScsXHJcbiAgICAgICAgc3BlZWQ6IDEwMDAsIC8vIEludGVnZXIuIEhvdyBmYXN0IHRvIGNvbXBsZXRlIHRoZSBzY3JvbGwgaW4gbWlsbGlzZWNvbmRzXHJcbiAgICB9KTtcclxuICAgICQoXCIuZmFuY3lib3gtbWVkaWFcIikuZmFuY3lib3goe1xyXG4gICAgICAgIG9wZW5FZmZlY3Q6ICdub25lJyxcclxuICAgICAgICBjbG9zZUVmZmVjdDogJ25vbmUnLFxyXG4gICAgICAgIGhlbHBlcnM6IHtcclxuICAgICAgICAgICAgbWVkaWE6IHt9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKFwiLmVjb25vbWVzLXBvcHVwXCIpLmZhbmN5Ym94KHtcclxuICAgICAgICBtYXhXaWR0aCAgICA6IDUwMCxcclxuICAgICAgICBtYXhIZWlnaHQgICA6IDQwMCxcclxuICAgICAgICBmaXRUb1ZpZXcgICA6IGZhbHNlLFxyXG4gICAgICAgIHdpZHRoICAgICAgIDogJzUwMHB4JyxcclxuICAgICAgICBoZWlnaHQgICAgICA6ICc0MDBweCcsXHJcbiAgICAgICAgYXV0b1NpemUgICAgOiBmYWxzZSxcclxuICAgICAgICBjbG9zZUNsaWNrICA6IGZhbHNlLFxyXG4gICAgICAgIG9wZW5FZmZlY3QgIDogJ25vbmUnLFxyXG4gICAgICAgIGNsb3NlRWZmZWN0IDogJ25vbmUnXHJcbiAgICB9KTtcclxuICAgIHZhciBzID0gc2tyb2xsci5pbml0KHtmb3JjZUhlaWdodDogZmFsc2V9KTtcclxufSk7XHJcblxyXG4iLCIvLyBwYWdlIGluaXRcclxualF1ZXJ5KGZ1bmN0aW9uKCl7XHJcbiAgICBpbml0TW9iaWxlTmF2KCk7XHJcbn0pO1xyXG5cclxuLy8gbW9iaWxlIG1lbnUgaW5pdFxyXG5mdW5jdGlvbiBpbml0TW9iaWxlTmF2KCkge1xyXG4gICAgalF1ZXJ5KCdib2R5JykubW9iaWxlTmF2KHtcclxuICAgICAgICBoaWRlT25DbGlja091dHNpZGU6IHRydWUsXHJcbiAgICAgICAgbWVudUFjdGl2ZUNsYXNzOiAnbmF2LWFjdGl2ZScsXHJcbiAgICAgICAgbWVudU9wZW5lcjogJy5tZW51LW9wZW5lcicsXHJcbiAgICAgICAgbWVudURyb3A6ICcubmF2LWRyb3AnXHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuICogU2ltcGxlIE1vYmlsZSBOYXZpZ2F0aW9uXHJcbiAqL1xyXG47KGZ1bmN0aW9uKCQpIHtcclxuICAgIGZ1bmN0aW9uIE1vYmlsZU5hdihvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe1xyXG4gICAgICAgICAgICBjb250YWluZXI6IG51bGwsXHJcbiAgICAgICAgICAgIGhpZGVPbkNsaWNrT3V0c2lkZTogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lbnVBY3RpdmVDbGFzczogJ25hdi1hY3RpdmUnLFxyXG4gICAgICAgICAgICBtZW51T3BlbmVyOiAnLm5hdi1vcGVuZXInLFxyXG4gICAgICAgICAgICBtZW51RHJvcDogJy5uYXYtZHJvcCcsXHJcbiAgICAgICAgICAgIHRvZ2dsZUV2ZW50OiAnY2xpY2snLFxyXG4gICAgICAgICAgICBvdXRzaWRlQ2xpY2tFdmVudDogJ2NsaWNrIHRvdWNoc3RhcnQgcG9pbnRlcmRvd24gTVNQb2ludGVyRG93bidcclxuICAgICAgICB9LCBvcHRpb25zKTtcclxuICAgICAgICB0aGlzLmluaXRTdHJ1Y3R1cmUoKTtcclxuICAgICAgICB0aGlzLmF0dGFjaEV2ZW50cygpO1xyXG4gICAgfVxyXG4gICAgTW9iaWxlTmF2LnByb3RvdHlwZSA9IHtcclxuICAgICAgICBpbml0U3RydWN0dXJlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdlID0gJCgnaHRtbCcpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9ICQodGhpcy5vcHRpb25zLmNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIHRoaXMub3BlbmVyID0gdGhpcy5jb250YWluZXIuZmluZCh0aGlzLm9wdGlvbnMubWVudU9wZW5lcik7XHJcbiAgICAgICAgICAgIHRoaXMuZHJvcCA9IHRoaXMuY29udGFpbmVyLmZpbmQodGhpcy5vcHRpb25zLm1lbnVEcm9wKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGF0dGFjaEV2ZW50czogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIGlmKGFjdGl2YXRlUmVzaXplSGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgYWN0aXZhdGVSZXNpemVIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZVJlc2l6ZUhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLm91dHNpZGVDbGlja0hhbmRsZXIgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICBpZihzZWxmLmlzT3BlbmVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gJChlLnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIXRhcmdldC5jbG9zZXN0KHNlbGYub3BlbmVyKS5sZW5ndGggJiYgIXRhcmdldC5jbG9zZXN0KHNlbGYuZHJvcCkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub3BlbmVyQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi50b2dnbGUoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub3BlbmVyLm9uKHRoaXMub3B0aW9ucy50b2dnbGVFdmVudCwgdGhpcy5vcGVuZXJDbGlja0hhbmRsZXIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaXNPcGVuZWQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXIuaGFzQ2xhc3ModGhpcy5vcHRpb25zLm1lbnVBY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzaG93OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2xhc3ModGhpcy5vcHRpb25zLm1lbnVBY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgICAgIGlmKHRoaXMub3B0aW9ucy5oaWRlT25DbGlja091dHNpZGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFnZS5vbih0aGlzLm9wdGlvbnMub3V0c2lkZUNsaWNrRXZlbnQsIHRoaXMub3V0c2lkZUNsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGhpZGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMubWVudUFjdGl2ZUNsYXNzKTtcclxuICAgICAgICAgICAgaWYodGhpcy5vcHRpb25zLmhpZGVPbkNsaWNrT3V0c2lkZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlLm9mZih0aGlzLm9wdGlvbnMub3V0c2lkZUNsaWNrRXZlbnQsIHRoaXMub3V0c2lkZUNsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHRvZ2dsZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5tZW51QWN0aXZlQ2xhc3MpO1xyXG4gICAgICAgICAgICB0aGlzLm9wZW5lci5vZmYodGhpcy5vcHRpb25zLnRvZ2dsZUV2ZW50LCB0aGlzLmNsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgICAgIHRoaXMucGFnZS5vZmYodGhpcy5vcHRpb25zLm91dHNpZGVDbGlja0V2ZW50LCB0aGlzLm91dHNpZGVDbGlja0hhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdmFyIGFjdGl2YXRlUmVzaXplSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciB3aW4gPSAkKHdpbmRvdyksXHJcbiAgICAgICAgICAgIGRvYyA9ICQoJ2h0bWwnKSxcclxuICAgICAgICAgICAgcmVzaXplQ2xhc3MgPSAncmVzaXplLWFjdGl2ZScsXHJcbiAgICAgICAgICAgIGZsYWcsIHRpbWVyO1xyXG4gICAgICAgIHZhciByZW1vdmVDbGFzc0hhbmRsZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgZmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBkb2MucmVtb3ZlQ2xhc3MocmVzaXplQ2xhc3MpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHJlc2l6ZUhhbmRsZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYoIWZsYWcpIHtcclxuICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZG9jLmFkZENsYXNzKHJlc2l6ZUNsYXNzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xyXG4gICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQocmVtb3ZlQ2xhc3NIYW5kbGVyLCA1MDApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgd2luLm9uKCdyZXNpemUgb3JpZW50YXRpb25jaGFuZ2UnLCByZXNpemVIYW5kbGVyKTtcclxuICAgIH07XHJcblxyXG4gICAgJC5mbi5tb2JpbGVOYXYgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHBhcmFtcyA9ICQuZXh0ZW5kKHt9LCBvcHRpb25zLCB7Y29udGFpbmVyOiB0aGlzfSksXHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IG5ldyBNb2JpbGVOYXYocGFyYW1zKTtcclxuICAgICAgICAgICAgJC5kYXRhKHRoaXMsICdNb2JpbGVOYXYnLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59KGpRdWVyeSkpOyIsIi8vIHBhZ2UgaW5pdFxyXG5qUXVlcnkoZnVuY3Rpb24oKXtcclxuXHRpbml0VGFicygpO1xyXG59KTtcclxuXHJcbi8vIGNvbnRlbnQgdGFicyBpbml0XHJcbmZ1bmN0aW9uIGluaXRUYWJzKCkge1xyXG5cdGpRdWVyeSgndWwudGFic2V0JykudGFic2V0KHtcclxuXHRcdHRhYkxpbmtzOiAnYScsXHJcblx0XHRkZWZhdWx0VGFiOiBmYWxzZVxyXG5cdH0pO1xyXG59XHJcblxyXG4vKlxyXG4gKiBqUXVlcnkgVGFicyBwbHVnaW5cclxuICovXHJcblxyXG47KGZ1bmN0aW9uKCQsICR3aW4pIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGZ1bmN0aW9uIFRhYnNldCgkaG9sZGVyLCBvcHRpb25zKSB7XHJcblx0XHR0aGlzLiRob2xkZXIgPSAkaG9sZGVyO1xyXG5cdFx0dGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuXHJcblx0XHR0aGlzLmluaXQoKTtcclxuXHRcdHRoaXMubWFrZUNhbGxiYWNrKCdvbkluaXQnLCB0aGlzKTtcclxuXHR9XHJcblxyXG5cdFRhYnNldC5wcm90b3R5cGUgPSB7XHJcblx0XHRpbml0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy4kdGFiTGlua3MgPSB0aGlzLiRob2xkZXIuZmluZCh0aGlzLm9wdGlvbnMudGFiTGlua3MpO1xyXG5cclxuXHRcdFx0dGhpcy5zZXRTdGFydEFjdGl2ZUluZGV4KCk7XHJcblx0XHRcdHRoaXMuc2V0QWN0aXZlVGFiKCk7XHJcblxyXG5cdFx0XHRpZiAodGhpcy5vcHRpb25zLmF1dG9IZWlnaHQpIHtcclxuXHRcdFx0XHR0aGlzLiR0YWJIb2xkZXIgPSAkKHRoaXMuJHRhYkxpbmtzLmVxKDApLmF0dHIodGhpcy5vcHRpb25zLmF0dHJpYikpLnBhcmVudCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdHNldFN0YXJ0QWN0aXZlSW5kZXg6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgJGNsYXNzVGFyZ2V0cyA9IHRoaXMuZ2V0Q2xhc3NUYXJnZXQodGhpcy4kdGFiTGlua3MpO1xyXG5cdFx0XHR2YXIgJGFjdGl2ZUxpbmsgPSAkY2xhc3NUYXJnZXRzLmZpbHRlcignLicgKyB0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xyXG5cdFx0XHR2YXIgJGhhc2hMaW5rID0gdGhpcy4kdGFiTGlua3MuZmlsdGVyKCdbJyArIHRoaXMub3B0aW9ucy5hdHRyaWIgKyAnPVwiJyArIGxvY2F0aW9uLmhhc2ggKyAnXCJdJyk7XHJcblx0XHRcdHZhciBhY3RpdmVJbmRleDtcclxuXHJcblx0XHRcdGlmICh0aGlzLm9wdGlvbnMuY2hlY2tIYXNoICYmICRoYXNoTGluay5sZW5ndGgpIHtcclxuXHRcdFx0XHQkYWN0aXZlTGluayA9ICRoYXNoTGluaztcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0YWN0aXZlSW5kZXggPSAkY2xhc3NUYXJnZXRzLmluZGV4KCRhY3RpdmVMaW5rKTtcclxuXHJcblx0XHRcdHRoaXMuYWN0aXZlVGFiSW5kZXggPSB0aGlzLnByZXZUYWJJbmRleCA9IChhY3RpdmVJbmRleCA9PT0gLTEgPyAodGhpcy5vcHRpb25zLmRlZmF1bHRUYWIgPyAwIDogbnVsbCkgOiBhY3RpdmVJbmRleCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHNldEFjdGl2ZVRhYjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRcdHRoaXMuJHRhYkxpbmtzLmVhY2goZnVuY3Rpb24oaSwgbGluaykge1xyXG5cdFx0XHRcdHZhciAkbGluayA9ICQobGluayk7XHJcblx0XHRcdFx0dmFyICRjbGFzc1RhcmdldCA9IHNlbGYuZ2V0Q2xhc3NUYXJnZXQoJGxpbmspO1xyXG5cdFx0XHRcdHZhciAkdGFiID0gJCgkbGluay5hdHRyKHNlbGYub3B0aW9ucy5hdHRyaWIpKTtcclxuXHJcblx0XHRcdFx0aWYgKGkgIT09IHNlbGYuYWN0aXZlVGFiSW5kZXgpIHtcclxuXHRcdFx0XHRcdCRjbGFzc1RhcmdldC5yZW1vdmVDbGFzcyhzZWxmLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xyXG5cdFx0XHRcdFx0JHRhYi5hZGRDbGFzcyhzZWxmLm9wdGlvbnMudGFiSGlkZGVuQ2xhc3MpLnJlbW92ZUNsYXNzKHNlbGYub3B0aW9ucy5hY3RpdmVDbGFzcyk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdCRjbGFzc1RhcmdldC5hZGRDbGFzcyhzZWxmLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xyXG5cdFx0XHRcdFx0JHRhYi5yZW1vdmVDbGFzcyhzZWxmLm9wdGlvbnMudGFiSGlkZGVuQ2xhc3MpLmFkZENsYXNzKHNlbGYub3B0aW9ucy5hY3RpdmVDbGFzcyk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRzZWxmLmF0dGFjaFRhYkxpbmsoJGxpbmssIGkpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0YXR0YWNoVGFiTGluazogZnVuY3Rpb24oJGxpbmssIGkpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdFx0JGxpbmsub24odGhpcy5vcHRpb25zLmV2ZW50ICsgJy50YWJzZXQnLCBmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdFx0XHRpZiAoc2VsZi5hY3RpdmVUYWJJbmRleCA9PT0gc2VsZi5wcmV2VGFiSW5kZXggJiYgc2VsZi5hY3RpdmVUYWJJbmRleCAhPT0gaSkge1xyXG5cdFx0XHRcdFx0c2VsZi5hY3RpdmVUYWJJbmRleCA9IGk7XHJcblx0XHRcdFx0XHRzZWxmLnN3aXRjaFRhYnMoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRyZXNpemVIb2xkZXI6IGZ1bmN0aW9uKGhlaWdodCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0XHRpZiAoaGVpZ2h0KSB7XHJcblx0XHRcdFx0dGhpcy4kdGFiSG9sZGVyLmhlaWdodChoZWlnaHQpO1xyXG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRzZWxmLiR0YWJIb2xkZXIuYWRkQ2xhc3MoJ3RyYW5zaXRpb24nKTtcclxuXHRcdFx0XHR9LCAxMCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0c2VsZi4kdGFiSG9sZGVyLnJlbW92ZUNsYXNzKCd0cmFuc2l0aW9uJykuaGVpZ2h0KCcnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRzd2l0Y2hUYWJzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdFx0dmFyICRwcmV2TGluayA9IHRoaXMuJHRhYkxpbmtzLmVxKHRoaXMucHJldlRhYkluZGV4KTtcclxuXHRcdFx0dmFyICRuZXh0TGluayA9IHRoaXMuJHRhYkxpbmtzLmVxKHRoaXMuYWN0aXZlVGFiSW5kZXgpO1xyXG5cclxuXHRcdFx0dmFyICRwcmV2VGFiID0gdGhpcy5nZXRUYWIoJHByZXZMaW5rKTtcclxuXHRcdFx0dmFyICRuZXh0VGFiID0gdGhpcy5nZXRUYWIoJG5leHRMaW5rKTtcclxuXHJcblx0XHRcdCRwcmV2VGFiLnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyk7XHJcblxyXG5cdFx0XHRpZiAoc2VsZi5oYXZlVGFiSG9sZGVyKCkpIHtcclxuXHRcdFx0XHR0aGlzLnJlc2l6ZUhvbGRlcigkcHJldlRhYi5vdXRlckhlaWdodCgpKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRzZWxmLmdldENsYXNzVGFyZ2V0KCRwcmV2TGluaykucmVtb3ZlQ2xhc3Moc2VsZi5vcHRpb25zLmFjdGl2ZUNsYXNzKTtcclxuXHJcblx0XHRcdFx0JHByZXZUYWIuYWRkQ2xhc3Moc2VsZi5vcHRpb25zLnRhYkhpZGRlbkNsYXNzKTtcclxuXHRcdFx0XHQkbmV4dFRhYi5yZW1vdmVDbGFzcyhzZWxmLm9wdGlvbnMudGFiSGlkZGVuQ2xhc3MpLmFkZENsYXNzKHNlbGYub3B0aW9ucy5hY3RpdmVDbGFzcyk7XHJcblxyXG5cdFx0XHRcdHNlbGYuZ2V0Q2xhc3NUYXJnZXQoJG5leHRMaW5rKS5hZGRDbGFzcyhzZWxmLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xyXG5cclxuXHRcdFx0XHRpZiAoc2VsZi5oYXZlVGFiSG9sZGVyKCkpIHtcclxuXHRcdFx0XHRcdHNlbGYucmVzaXplSG9sZGVyKCRuZXh0VGFiLm91dGVySGVpZ2h0KCkpO1xyXG5cclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYucmVzaXplSG9sZGVyKCk7XHJcblx0XHRcdFx0XHRcdHNlbGYucHJldlRhYkluZGV4ID0gc2VsZi5hY3RpdmVUYWJJbmRleDtcclxuXHRcdFx0XHRcdH0sIHNlbGYub3B0aW9ucy5hbmltU3BlZWQpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRzZWxmLnByZXZUYWJJbmRleCA9IHNlbGYuYWN0aXZlVGFiSW5kZXg7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIG9uY2hhbmdlIGNhbGxiYWNrXHJcblx0XHRcdFx0c2VsZi5tYWtlQ2FsbGJhY2soJ29uQ2hhbmdlJywgc2VsZiwgJG5leHRMaW5rKTtcclxuXHRcdFx0fSwgdGhpcy5vcHRpb25zLmF1dG9IZWlnaHQgPyB0aGlzLm9wdGlvbnMuYW5pbVNwZWVkIDogMSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGdldENsYXNzVGFyZ2V0OiBmdW5jdGlvbigkbGluaykge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5vcHRpb25zLmFkZFRvUGFyZW50ID8gJGxpbmsucGFyZW50KCkgOiAkbGluaztcclxuXHRcdH0sXHJcblxyXG5cdFx0Z2V0QWN0aXZlVGFiOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuZ2V0VGFiKHRoaXMuJHRhYkxpbmtzLmVxKHRoaXMuYWN0aXZlVGFiSW5kZXgpKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Z2V0VGFiOiBmdW5jdGlvbigkbGluaykge1xyXG5cdFx0XHRyZXR1cm4gJCgkbGluay5hdHRyKHRoaXMub3B0aW9ucy5hdHRyaWIpKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0aGF2ZVRhYkhvbGRlcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLiR0YWJIb2xkZXIgJiYgdGhpcy4kdGFiSG9sZGVyLmxlbmd0aDtcclxuXHRcdH0sXHJcblxyXG5cdFx0bWFrZUNhbGxiYWNrOiBmdW5jdGlvbihuYW1lKSB7XHJcblx0XHRcdGlmKHR5cGVvZiB0aGlzLm9wdGlvbnNbbmFtZV0gPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XHJcblx0XHRcdFx0YXJncy5zaGlmdCgpO1xyXG5cdFx0XHRcdHRoaXMub3B0aW9uc1tuYW1lXS5hcHBseSh0aGlzLCBhcmdzKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdFx0dGhpcy4kdGFiTGlua3Mub2ZmKCcudGFic2V0JykuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgJGxpbmsgPSAkKHRoaXMpO1xyXG5cclxuXHRcdFx0XHRzZWxmLmdldENsYXNzVGFyZ2V0KCRsaW5rKS5yZW1vdmVDbGFzcyhzZWxmLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xyXG5cdFx0XHRcdCQoJGxpbmsuYXR0cihzZWxmLm9wdGlvbnMuYXR0cmliKSkucmVtb3ZlQ2xhc3Moc2VsZi5vcHRpb25zLmFjdGl2ZUNsYXNzICsgJyAnICsgc2VsZi5vcHRpb25zLnRhYkhpZGRlbkNsYXNzKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLiRob2xkZXIucmVtb3ZlRGF0YSgnVGFic2V0Jyk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0JC5mbi50YWJzZXQgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcblx0XHRvcHRpb25zID0gJC5leHRlbmQoe1xyXG5cdFx0XHRhY3RpdmVDbGFzczogJ2FjdGl2ZScsXHJcblx0XHRcdGFkZFRvUGFyZW50OiBmYWxzZSxcclxuXHRcdFx0YXV0b0hlaWdodDogZmFsc2UsXHJcblx0XHRcdGNoZWNrSGFzaDogZmFsc2UsXHJcblx0XHRcdGRlZmF1bHRUYWI6IHRydWUsXHJcblx0XHRcdGFuaW1TcGVlZDogNTAwLFxyXG5cdFx0XHR0YWJMaW5rczogJ2EnLFxyXG5cdFx0XHRhdHRyaWI6ICdocmVmJyxcclxuXHRcdFx0ZXZlbnQ6ICdjbGljaycsXHJcblx0XHRcdHRhYkhpZGRlbkNsYXNzOiAnanMtdGFiLWhpZGRlbidcclxuXHRcdH0sIG9wdGlvbnMpO1xyXG5cdFx0b3B0aW9ucy5hdXRvSGVpZ2h0ID0gb3B0aW9ucy5hdXRvSGVpZ2h0ICYmICQuc3VwcG9ydC5vcGFjaXR5O1xyXG5cclxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciAkaG9sZGVyID0gJCh0aGlzKTtcclxuXHJcblx0XHRcdGlmICghJGhvbGRlci5kYXRhKCdUYWJzZXQnKSkge1xyXG5cdFx0XHRcdCRob2xkZXIuZGF0YSgnVGFic2V0JywgbmV3IFRhYnNldCgkaG9sZGVyLCBvcHRpb25zKSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH07XHJcbn0oalF1ZXJ5LCBqUXVlcnkod2luZG93KSkpOyJdfQ==
