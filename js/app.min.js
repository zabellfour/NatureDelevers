(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

require('./modules/nav');

require('./modules/tabs');

require('./modules/openClose');

function initGetAjax() {
	onVideoPauseButtonClick();
	playSound(false);
	skrollr.init().destroy();
	$(function () {
		if ($(window).width() > 1024) {
			$('.scroll-block').jScrollPane();
		}
	});
	$('body').on('click', '.scroll-link', function () {
		var offset = $('.body-holder').position().top;
		$("body, .modal").animate({
			scrollTop: offset
		}, 'slow');
	});
	$(".fancybox-media").fancybox({
		openEffect: 'none',
		closeEffect: 'none',
		helpers: {
			media: {}
		}
	});
	$(".economes-popup").fancybox({
		maxWidth: 500,
		maxHeight: 400,
		fitToView: true,
		autoSize: true,
		closeClick: false,
		openEffect: 'none',
		closeEffect: 'none'
	});
	$(".fancybox-media").fancybox({
		openEffect: 'none',
		closeEffect: 'none',
		helpers: {
			media: {}
		}
	});
	$('div.open-box-text').openClose({
		hideOnClickOutside: true,
		activeClass: 'active',
		opener: '.open-text-btn',
		slider: '.holder-text',
		animSpeed: 400,
		effect: 'slide'
	});
	skrollr.init({
		forceHeight: false
	});
}

$('#modalChapter').on('shown.bs.modal', function (e) {
	initGetAjax();
});

},{"./modules/nav":2,"./modules/openClose":3,"./modules/tabs":4}],2:[function(require,module,exports){
"use strict";

// page init
jQuery(function () {
    initMobileNav();
    $(".drop-opener").click(function (event) {
        event.preventDefault();
        $(this).parent().find(".dropdown").toggleClass("opened");
    });
    $("body").click(function (e) {
        if ($(e.target).closest(".holder2").length == 0) $(".dropdown").removeClass("opened");
        if ($(e.target).closest(".share-opened").length == 0) $(".share-holder").removeClass("share-opened");
    });
    $(".share-holder").click(function (event) {
        event.preventDefault();
        $(this).toggleClass("share-opened");
    });
});

// mobile menu init
function initMobileNav() {
    jQuery('body').mobileNav({
        hideOnClickOutside: true,
        menuActiveClass: 'nav-active',
        menuOpener: '.menu-opener',
        menuDrop: '.nav-holder'
    });
}

/*
 * Simple Mobile Navigation
 */
;
(function ($) {
    function MobileNav(options) {
        this.options = $.extend({
            container: null,
            hideOnClickOutside: false,
            menuActiveClass: 'nav-active',
            menuOpener: '.nav-opener',
            menuDrop: '.nav-drop',
            toggleEvent: 'click',
            outsideClickEvent: 'click touchstart pointerdown MSPointerDown'
        }, options);
        this.initStructure();
        this.attachEvents();
    }
    MobileNav.prototype = {
        initStructure: function initStructure() {
            this.page = $('html');
            this.container = $(this.options.container);
            this.opener = this.container.find(this.options.menuOpener);
            this.drop = this.container.find(this.options.menuDrop);
        },
        attachEvents: function attachEvents() {
            var self = this;

            if (activateResizeHandler) {
                activateResizeHandler();
                activateResizeHandler = null;
            }

            this.outsideClickHandler = function (e) {
                if (self.isOpened()) {
                    var target = $(e.target);
                    if (!target.closest(self.opener).length && !target.closest(self.drop).length) {
                        self.hide();
                    }
                }
            };

            this.openerClickHandler = function (e) {
                e.preventDefault();
                self.toggle();
            };

            this.opener.on(this.options.toggleEvent, this.openerClickHandler);
        },
        isOpened: function isOpened() {
            return this.container.hasClass(this.options.menuActiveClass);
        },
        show: function show() {
            this.container.addClass(this.options.menuActiveClass);
            if (this.options.hideOnClickOutside) {
                this.page.on(this.options.outsideClickEvent, this.outsideClickHandler);
            }
        },
        hide: function hide() {
            this.container.removeClass(this.options.menuActiveClass);
            if (this.options.hideOnClickOutside) {
                this.page.off(this.options.outsideClickEvent, this.outsideClickHandler);
            }
        },
        toggle: function toggle() {
            if (this.isOpened()) {
                this.hide();
            } else {
                this.show();
            }
        },
        destroy: function destroy() {
            this.container.removeClass(this.options.menuActiveClass);
            this.opener.off(this.options.toggleEvent, this.clickHandler);
            this.page.off(this.options.outsideClickEvent, this.outsideClickHandler);
        }
    };

    var activateResizeHandler = function activateResizeHandler() {
        var win = $(window),
            doc = $('html'),
            resizeClass = 'resize-active',
            flag,
            timer;
        var removeClassHandler = function removeClassHandler() {
            flag = false;
            doc.removeClass(resizeClass);
        };
        var resizeHandler = function resizeHandler() {
            if (!flag) {
                flag = true;
                doc.addClass(resizeClass);
            }
            clearTimeout(timer);
            timer = setTimeout(removeClassHandler, 500);
        };
        win.on('resize orientationchange', resizeHandler);
    };

    $.fn.mobileNav = function (options) {
        return this.each(function () {
            var params = $.extend({}, options, { container: this }),
                instance = new MobileNav(params);
            $.data(this, 'MobileNav', instance);
        });
    };
})(jQuery);

},{}],3:[function(require,module,exports){
'use strict';

/*
 * jQuery Open/Close plugin
 */
;(function ($) {
	function OpenClose(options) {
		this.options = $.extend({
			addClassBeforeAnimation: true,
			hideOnClickOutside: false,
			activeClass: 'active',
			opener: '.opener',
			slider: '.slide',
			animSpeed: 400,
			effect: 'fade',
			event: 'click'
		}, options);
		this.init();
	}
	OpenClose.prototype = {
		init: function init() {
			if (this.options.holder) {
				this.findElements();
				this.attachEvents();
				this.makeCallback('onInit', this);
			}
		},
		findElements: function findElements() {
			this.holder = $(this.options.holder);
			this.opener = this.holder.find(this.options.opener);
			this.slider = this.holder.find(this.options.slider);
		},
		attachEvents: function attachEvents() {
			// add handler
			var self = this;
			this.eventHandler = function (e) {
				e.preventDefault();
				if (self.slider.hasClass(slideHiddenClass)) {
					self.showSlide();
				} else {
					self.hideSlide();
				}
			};
			self.opener.bind(self.options.event, this.eventHandler);

			// hover mode handler
			if (self.options.event === 'over') {
				self.opener.bind('mouseenter', function () {
					if (!self.holder.hasClass(self.options.activeClass)) {
						self.showSlide();
					}
				});
				self.holder.bind('mouseleave', function () {
					self.hideSlide();
				});
			}

			// outside click handler
			self.outsideClickHandler = function (e) {
				if (self.options.hideOnClickOutside) {
					var target = $(e.target);
					if (!target.is(self.holder) && !target.closest(self.holder).length) {
						self.hideSlide();
					}
				}
			};

			// set initial styles
			if (this.holder.hasClass(this.options.activeClass)) {
				$(document).bind('click touchstart', self.outsideClickHandler);
			} else {
				this.slider.addClass(slideHiddenClass);
			}
		},
		showSlide: function showSlide() {
			var self = this;
			if (self.options.addClassBeforeAnimation) {
				self.holder.addClass(self.options.activeClass);
			}
			self.slider.removeClass(slideHiddenClass);
			$(document).bind('click touchstart', self.outsideClickHandler);

			self.makeCallback('animStart', true);
			toggleEffects[self.options.effect].show({
				box: self.slider,
				speed: self.options.animSpeed,
				complete: function complete() {
					if (!self.options.addClassBeforeAnimation) {
						self.holder.addClass(self.options.activeClass);
					}
					self.makeCallback('animEnd', true);
				}
			});
		},
		hideSlide: function hideSlide() {
			var self = this;
			if (self.options.addClassBeforeAnimation) {
				self.holder.removeClass(self.options.activeClass);
			}
			$(document).unbind('click touchstart', self.outsideClickHandler);

			self.makeCallback('animStart', false);
			toggleEffects[self.options.effect].hide({
				box: self.slider,
				speed: self.options.animSpeed,
				complete: function complete() {
					if (!self.options.addClassBeforeAnimation) {
						self.holder.removeClass(self.options.activeClass);
					}
					self.slider.addClass(slideHiddenClass);
					self.makeCallback('animEnd', false);
				}
			});
		},
		destroy: function destroy() {
			this.slider.removeClass(slideHiddenClass).css({ display: '' });
			this.opener.unbind(this.options.event, this.eventHandler);
			this.holder.removeClass(this.options.activeClass).removeData('OpenClose');
			$(document).unbind('click touchstart', this.outsideClickHandler);
		},
		makeCallback: function makeCallback(name) {
			if (typeof this.options[name] === 'function') {
				var args = Array.prototype.slice.call(arguments);
				args.shift();
				this.options[name].apply(this, args);
			}
		}
	};

	// add stylesheet for slide on DOMReady
	var slideHiddenClass = 'js-slide-hidden';
	(function () {
		var tabStyleSheet = $('<style type="text/css">')[0];
		var tabStyleRule = '.' + slideHiddenClass;
		tabStyleRule += '{position:absolute !important;left:-9999px !important;top:-9999px !important;display:block !important}';
		if (tabStyleSheet.styleSheet) {
			tabStyleSheet.styleSheet.cssText = tabStyleRule;
		} else {
			tabStyleSheet.appendChild(document.createTextNode(tabStyleRule));
		}
		$('head').append(tabStyleSheet);
	})();

	// animation effects
	var toggleEffects = {
		slide: {
			show: function show(o) {
				o.box.stop(true).hide().slideDown(o.speed, o.complete);
			},
			hide: function hide(o) {
				o.box.stop(true).slideUp(o.speed, o.complete);
			}
		},
		fade: {
			show: function show(o) {
				o.box.stop(true).hide().fadeIn(o.speed, o.complete);
			},
			hide: function hide(o) {
				o.box.stop(true).fadeOut(o.speed, o.complete);
			}
		},
		none: {
			show: function show(o) {
				o.box.hide().show(0, o.complete);
			},
			hide: function hide(o) {
				o.box.hide(0, o.complete);
			}
		}
	};

	// jQuery plugin interface
	$.fn.openClose = function (opt) {
		return this.each(function () {
			jQuery(this).data('OpenClose', new OpenClose($.extend(opt, { holder: this })));
		});
	};
})(jQuery);

},{}],4:[function(require,module,exports){
'use strict';

// page init
jQuery(function () {
	initTabs();
});

// content tabs init
function initTabs() {
	jQuery('ul.tabset').tabset({
		tabLinks: 'a',
		defaultTab: false
	});
}

/*
 * jQuery Tabs plugin
 */

;(function ($, $win) {
	'use strict';

	function Tabset($holder, options) {
		this.$holder = $holder;
		this.options = options;

		this.init();
		this.makeCallback('onInit', this);
	}

	Tabset.prototype = {
		init: function init() {
			this.$tabLinks = this.$holder.find(this.options.tabLinks);

			this.setStartActiveIndex();
			this.setActiveTab();

			if (this.options.autoHeight) {
				this.$tabHolder = $(this.$tabLinks.eq(0).attr(this.options.attrib)).parent();
			}
		},

		setStartActiveIndex: function setStartActiveIndex() {
			var $classTargets = this.getClassTarget(this.$tabLinks);
			var $activeLink = $classTargets.filter('.' + this.options.activeClass);
			var $hashLink = this.$tabLinks.filter('[' + this.options.attrib + '="' + location.hash + '"]');
			var activeIndex;

			if (this.options.checkHash && $hashLink.length) {
				$activeLink = $hashLink;
			}

			activeIndex = $classTargets.index($activeLink);

			this.activeTabIndex = this.prevTabIndex = activeIndex === -1 ? this.options.defaultTab ? 0 : null : activeIndex;
		},

		setActiveTab: function setActiveTab() {
			var self = this;

			this.$tabLinks.each(function (i, link) {
				var $link = $(link);
				var $classTarget = self.getClassTarget($link);
				var $tab = $($link.attr(self.options.attrib));

				if (i !== self.activeTabIndex) {
					$classTarget.removeClass(self.options.activeClass);
					$tab.addClass(self.options.tabHiddenClass).removeClass(self.options.activeClass);
				} else {
					$classTarget.addClass(self.options.activeClass);
					$tab.removeClass(self.options.tabHiddenClass).addClass(self.options.activeClass);
				}

				self.attachTabLink($link, i);
			});
		},

		attachTabLink: function attachTabLink($link, i) {
			var self = this;

			$link.on(this.options.event + '.tabset', function (e) {
				e.preventDefault();

				if (self.activeTabIndex === self.prevTabIndex && self.activeTabIndex !== i) {
					self.activeTabIndex = i;
					self.switchTabs();
				}
			});
		},

		resizeHolder: function resizeHolder(height) {
			var self = this;

			if (height) {
				this.$tabHolder.height(height);
				setTimeout(function () {
					self.$tabHolder.addClass('transition');
				}, 10);
			} else {
				self.$tabHolder.removeClass('transition').height('');
			}
		},

		switchTabs: function switchTabs() {
			var self = this;

			var $prevLink = this.$tabLinks.eq(this.prevTabIndex);
			var $nextLink = this.$tabLinks.eq(this.activeTabIndex);

			var $prevTab = this.getTab($prevLink);
			var $nextTab = this.getTab($nextLink);

			$prevTab.removeClass(this.options.activeClass);

			if (self.haveTabHolder()) {
				this.resizeHolder($prevTab.outerHeight());
			}

			setTimeout(function () {
				self.getClassTarget($prevLink).removeClass(self.options.activeClass);

				$prevTab.addClass(self.options.tabHiddenClass);
				$nextTab.removeClass(self.options.tabHiddenClass).addClass(self.options.activeClass);

				self.getClassTarget($nextLink).addClass(self.options.activeClass);

				if (self.haveTabHolder()) {
					self.resizeHolder($nextTab.outerHeight());

					setTimeout(function () {
						self.resizeHolder();
						self.prevTabIndex = self.activeTabIndex;
					}, self.options.animSpeed);
				} else {
					self.prevTabIndex = self.activeTabIndex;
				}
				// onchange callback
				self.makeCallback('onChange', self, $nextLink);
			}, this.options.autoHeight ? this.options.animSpeed : 1);
		},

		getClassTarget: function getClassTarget($link) {
			return this.options.addToParent ? $link.parent() : $link;
		},

		getActiveTab: function getActiveTab() {
			return this.getTab(this.$tabLinks.eq(this.activeTabIndex));
		},

		getTab: function getTab($link) {
			return $($link.attr(this.options.attrib));
		},

		haveTabHolder: function haveTabHolder() {
			return this.$tabHolder && this.$tabHolder.length;
		},

		makeCallback: function makeCallback(name) {
			if (typeof this.options[name] === 'function') {
				var args = Array.prototype.slice.call(arguments);
				args.shift();
				this.options[name].apply(this, args);
			}
		},

		destroy: function destroy() {
			var self = this;

			this.$tabLinks.off('.tabset').each(function () {
				var $link = $(this);

				self.getClassTarget($link).removeClass(self.options.activeClass);
				$($link.attr(self.options.attrib)).removeClass(self.options.activeClass + ' ' + self.options.tabHiddenClass);
			});

			this.$holder.removeData('Tabset');
		}
	};

	$.fn.tabset = function (options) {
		options = $.extend({
			activeClass: 'active',
			addToParent: false,
			autoHeight: false,
			checkHash: false,
			defaultTab: true,
			animSpeed: 500,
			tabLinks: 'a',
			attrib: 'href',
			event: 'click',
			tabHiddenClass: 'js-tab-hidden'
		}, options);
		options.autoHeight = options.autoHeight && $.support.opacity;

		return this.each(function () {
			var $holder = $(this);

			if (!$holder.data('Tabset')) {
				$holder.data('Tabset', new Tabset($holder, options));
			}
		});
	};
})(jQuery, jQuery(window));

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFxhcHAuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFxuYXYuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFxvcGVuQ2xvc2UuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFx0YWJzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQTs7QUFDQTs7QUFDQTs7QUFFQSxTQUFTLFdBQVQsR0FBdUI7QUFDdEI7QUFDQSxXQUFVLEtBQVY7QUFDQSxTQUFRLElBQVIsR0FBZSxPQUFmO0FBQ0EsR0FBRSxZQUFXO0FBQ1osTUFBSSxFQUFFLE1BQUYsRUFBVSxLQUFWLEtBQW9CLElBQXhCLEVBQThCO0FBQzdCLEtBQUUsZUFBRixFQUFtQixXQUFuQjtBQUNBO0FBQ0QsRUFKRDtBQUtBLEdBQUUsTUFBRixFQUFVLEVBQVYsQ0FBYSxPQUFiLEVBQXNCLGNBQXRCLEVBQXNDLFlBQVc7QUFDaEQsTUFBSSxTQUFTLEVBQUUsY0FBRixFQUFrQixRQUFsQixHQUE2QixHQUExQztBQUNBLElBQUUsY0FBRixFQUFrQixPQUFsQixDQUEwQjtBQUN6QixjQUFXO0FBRGMsR0FBMUIsRUFFRyxNQUZIO0FBR0EsRUFMRDtBQU1BLEdBQUUsaUJBQUYsRUFBcUIsUUFBckIsQ0FBOEI7QUFDN0IsY0FBWSxNQURpQjtBQUU3QixlQUFhLE1BRmdCO0FBRzdCLFdBQVM7QUFDUixVQUFPO0FBREM7QUFIb0IsRUFBOUI7QUFPQSxHQUFFLGlCQUFGLEVBQXFCLFFBQXJCLENBQThCO0FBQzdCLFlBQVUsR0FEbUI7QUFFN0IsYUFBVyxHQUZrQjtBQUc3QixhQUFXLElBSGtCO0FBSTdCLFlBQVUsSUFKbUI7QUFLN0IsY0FBWSxLQUxpQjtBQU03QixjQUFZLE1BTmlCO0FBTzdCLGVBQWE7QUFQZ0IsRUFBOUI7QUFTQSxHQUFFLGlCQUFGLEVBQXFCLFFBQXJCLENBQThCO0FBQzdCLGNBQVksTUFEaUI7QUFFN0IsZUFB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LENBQWEsV0FBcEQ7QUFDQSxNQUFFLE1BQU0sSUFBTixDQUFXLEtBQUssT0FBTCxDQUFhLE1BQXhCLENBQUYsRUFBbUMsV0FBbkMsQ0FBK0MsS0FBSyxPQUFMLENBQWEsV0FBYixHQUEyQixHQUEzQixHQUFpQyxLQUFLLE9BQUwsQ0FBYSxjQUE3RjtBQUNBLElBTEQ7O0FBT0EsUUFBSyxPQUFMLENBQWEsVUFBYixDQUF3QixRQUF4QjtBQUNBO0FBbEppQixFQUFuQjs7QUFxSkEsR0FBRSxFQUFGLENBQUssTUFBTCxHQUFjLFVBQVMsT0FBVCxFQUFrQjtBQUMvQixZQUFVLEVBQUUsTUFBRixDQUFTO0FBQ2xCLGdCQUFhLFFBREs7QUFFbEIsZ0JBQWEsS0FGSztBQUdsQixlQUFZLEtBSE07QUFJbEIsY0FBVyxLQUpPO0FBS2xCLGVBQVksSUFMTTtBQU1sQixjQUFXLEdBTk87QUFPbEIsYUFBVSxHQVBRO0FBUWxCLFdBQVEsTUFSVTtBQVNsQixVQUFPLE9BVFc7QUFVbEIsbUJBQWdCO0FBVkUsR0FBVCxFQVdQLE9BWE8sQ0FBVjtBQVlBLFVBQVEsVUFBUixHQUFxQixRQUFRLFVBQVIsSUFBc0IsRUFBRSxPQUFGLENBQVUsT0FBckQ7O0FBRUEsU0FBTyxLQUFLLElBQUwsQ0FBVSxZQUFXO0FBQzNCLE9BQUksVUFBVSxFQUFFLElBQUYsQ0FBZDs7QUFFQSxPQUFJLENBQUMsUUFBUSxJQUFSLENBQWEsUUFBYixDQUFMLEVBQTZCO0FBQzVCLFlBQVEsSUFBUixDQUFhLFFBQWIsRUFBdUIsSUFBSSxNQUFKLENBQVcsT0FBWCxFQUFvQixPQUFwQixDQUF2QjtBQUNBO0FBQ0QsR0FOTSxDQUFQO0FBT0EsRUF0QkQ7QUF1QkEsQ0F2TEMsRUF1TEEsTUF2TEEsRUF1TFEsT0FBTyxNQUFQLENBdkxSLENBQUQiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0ICcuL21vZHVsZXMvbmF2JztcclxuaW1wb3J0ICcuL21vZHVsZXMvdGFicyc7XHJcbmltcG9ydCAnLi9tb2R1bGVzL29wZW5DbG9zZSc7XHJcblxyXG5mdW5jdGlvbiBpbml0R2V0QWpheCgpIHtcclxuXHRvblZpZGVvUGF1c2VCdXR0b25DbGljaygpO1xyXG5cdHBsYXlTb3VuZChmYWxzZSk7XHJcblx0c2tyb2xsci5pbml0KCkuZGVzdHJveSgpO1xyXG5cdCQoZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiAxMDI0KSB7XHJcblx0XHRcdCQoJy5zY3JvbGwtYmxvY2snKS5qU2Nyb2xsUGFuZSgpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdCQoJ2JvZHknKS5vbignY2xpY2snLCAnLnNjcm9sbC1saW5rJywgZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgb2Zmc2V0ID0gJCgnLmJvZHktaG9sZGVyJykucG9zaXRpb24oKS50b3A7XHJcblx0XHQkKFwiYm9keSwgLm1vZGFsXCIpLmFuaW1hdGUoe1xyXG5cdFx0XHRzY3JvbGxUb3A6IG9mZnNldFxyXG5cdFx0fSwgJ3Nsb3cnKTtcclxuXHR9KTtcclxuXHQkKFwiLmZhbmN5Ym94LW1lZGlhXCIpLmZhbmN5Ym94KHtcclxuXHRcdG9wZW5FZmZlY3Q6ICdub25lJyxcclxuXHRcdGNsb3NlRWZmZWN0OiAnbm9uZScsXHJcblx0XHRoZWxwZXJzOiB7XHJcblx0XHRcdG1lZGlhOiB7fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdCQoXCIuZWNvbm9tZXMtcG9wdXBcIikuZmFuY3lib3goe1xyXG5cdFx0bWF4V2lkdGg6IDUwMCxcclxuXHRcdG1heEhlaWdodDogNDAwLFxyXG5cdFx0Zml0VG9WaWV3OiB0cnVlLFxyXG5cdFx0YXV0b1NpemU6IHRydWUsXHJcblx0XHRjbG9zZUNsaWNrOiBmYWxzZSxcclxuXHRcdG9wZW5FZmZlY3Q6ICdub25lJyxcclxuXHRcdGNsb3NlRWZmZWN0OiAnbm9uZSdcclxuXHR9KTtcclxuXHQkKFwiLmZhbmN5Ym94LW1lZGlhXCIpLmZhbmN5Ym94KHtcclxuXHRcdG9wZW5FZmZlY3Q6ICdub25lJyxcclxuXHRcdGNsb3NlRWZmZWN0OiAnbm9uZScsXHJcblx0XHRoZWxwZXJzOiB7XHJcblx0XHRcdG1lZGlhOiB7fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdCQoJ2Rpdi5vcGVuLWJveC10ZXh0Jykub3BlbkNsb3NlKHtcclxuXHRcdGhpZGVPbkNsaWNrT3V0c2lkZTogdHJ1ZSxcclxuXHRcdGFjdGl2ZUNsYXNzOiAnYWN0aXZlJyxcclxuXHRcdG9wZW5lcjogJy5vcGVuLXRleHQtYnRuJyxcclxuXHRcdHNsaWRlcjogJy5ob2xkZXItdGV4dCcsXHJcblx0XHRhbmltU3BlZWQ6IDQwMCxcclxuXHRcdGVmZmVjdDogJ3NsaWRlJ1xyXG5cdH0pO1xyXG5cdHNrcm9sbHIuaW5pdCh7XHJcblx0XHRmb3JjZUhlaWdodDogZmFsc2VcclxuXHR9KTtcclxufVxyXG5cclxuJCgnI21vZGFsQ2hhcHRlcicpLm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uKGUpIHtcclxuXHRpbml0R2V0QWpheCgpXHJcbn0pOyIsIi8vIHBhZ2UgaW5pdFxyXG5qUXVlcnkoZnVuY3Rpb24oKSB7XHJcbiAgICBpbml0TW9iaWxlTmF2KCk7XHJcbiAgICAkKFwiLmRyb3Atb3BlbmVyXCIpLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoXCIuZHJvcGRvd25cIikudG9nZ2xlQ2xhc3MoXCJvcGVuZWRcIik7XHJcbiAgICB9KTtcclxuICAgICQoXCJib2R5XCIpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoJChlLnRhcmdldCkuY2xvc2VzdChcIi5ob2xkZXIyXCIpLmxlbmd0aCA9PSAwKVxyXG4gICAgICAgICAgICAkKFwiLmRyb3Bkb3duXCIpLnJlbW92ZUNsYXNzKFwib3BlbmVkXCIpO1xyXG4gICAgICAgIGlmICgkKGUudGFyZ2V0KS5jbG9zZXN0KFwiLnNoYXJlLW9wZW5lZFwiKS5sZW5ndGggPT0gMClcclxuICAgICAgICAgICAgJChcIi5zaGFyZS1ob2xkZXJcIikucmVtb3ZlQ2xhc3MoXCJzaGFyZS1vcGVuZWRcIik7XHJcbiAgICB9KTtcclxuICAgICQoXCIuc2hhcmUtaG9sZGVyXCIpLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKFwic2hhcmUtb3BlbmVkXCIpO1xyXG4gICAgfSk7XHJcblxyXG59KTtcclxuXHJcbi8vIG1vYmlsZSBtZW51IGluaXRcclxuZnVuY3Rpb24gaW5pdE1vYmlsZU5hdigpIHtcclxuICAgIGpRdWVyeSgnYm9keScpLm1vYmlsZU5hdih7XHJcbiAgICAgICAgaGlkZU9uQ2xpY2tPdXRzaWRlOiB0cnVlLFxyXG4gICAgICAgIG1lbnVBY3RpdmVDbGFzczogJ25hdi1hY3RpdmUnLFxyXG4gICAgICAgIG1lbnVPcGVuZXI6ICcubWVudS1vcGVuZXInLFxyXG4gICAgICAgIG1lbnVEcm9wOiAnLm5hdi1ob2xkZXInXHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcblxyXG4vKlxyXG4gKiBTaW1wbGUgTW9iaWxlIE5hdmlnYXRpb25cclxuICovXHJcbjtcclxuKGZ1bmN0aW9uKCQpIHtcclxuICAgIGZ1bmN0aW9uIE1vYmlsZU5hdihvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe1xyXG4gICAgICAgICAgICBjb250YWluZXI6IG51bGwsXHJcbiAgICAgICAgICAgIGhpZGVPbkNsaWNrT3V0c2lkZTogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lbnVBY3RpdmVDbGFzczogJ25hdi1hY3RpdmUnLFxyXG4gICAgICAgICAgICBtZW51T3BlbmVyOiAnLm5hdi1vcGVuZXInLFxyXG4gICAgICAgICAgICBtZW51RHJvcDogJy5uYXYtZHJvcCcsXHJcbiAgICAgICAgICAgIHRvZ2dsZUV2ZW50OiAnY2xpY2snLFxyXG4gICAgICAgICAgICBvdXRzaWRlQ2xpY2tFdmVudDogJ2NsaWNrIHRvdWNoc3RhcnQgcG9pbnRlcmRvd24gTVNQb2ludGVyRG93bidcclxuICAgICAgICB9LCBvcHRpb25zKTtcclxuICAgICAgICB0aGlzLmluaXRTdHJ1Y3R1cmUoKTtcclxuICAgICAgICB0aGlzLmF0dGFjaEV2ZW50cygpO1xyXG4gICAgfVxyXG4gICAgTW9iaWxlTmF2LnByb3RvdHlwZSA9IHtcclxuICAgICAgICBpbml0U3RydWN0dXJlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdlID0gJCgnaHRtbCcpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9ICQodGhpcy5vcHRpb25zLmNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIHRoaXMub3BlbmVyID0gdGhpcy5jb250YWluZXIuZmluZCh0aGlzLm9wdGlvbnMubWVudU9wZW5lcik7XHJcbiAgICAgICAgICAgIHRoaXMuZHJvcCA9IHRoaXMuY29udGFpbmVyLmZpbmQodGhpcy5vcHRpb25zLm1lbnVEcm9wKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGF0dGFjaEV2ZW50czogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIGlmIChhY3RpdmF0ZVJlc2l6ZUhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgIGFjdGl2YXRlUmVzaXplSGFuZGxlcigpO1xyXG4gICAgICAgICAgICAgICAgYWN0aXZhdGVSZXNpemVIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5vdXRzaWRlQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuaXNPcGVuZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKGUudGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldC5jbG9zZXN0KHNlbGYub3BlbmVyKS5sZW5ndGggJiYgIXRhcmdldC5jbG9zZXN0KHNlbGYuZHJvcCkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub3BlbmVyQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi50b2dnbGUoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub3BlbmVyLm9uKHRoaXMub3B0aW9ucy50b2dnbGVFdmVudCwgdGhpcy5vcGVuZXJDbGlja0hhbmRsZXIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaXNPcGVuZWQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXIuaGFzQ2xhc3ModGhpcy5vcHRpb25zLm1lbnVBY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzaG93OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2xhc3ModGhpcy5vcHRpb25zLm1lbnVBY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaGlkZU9uQ2xpY2tPdXRzaWRlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2Uub24odGhpcy5vcHRpb25zLm91dHNpZGVDbGlja0V2ZW50LCB0aGlzLm91dHNpZGVDbGlja0hhbmRsZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBoaWRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLm1lbnVBY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaGlkZU9uQ2xpY2tPdXRzaWRlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2Uub2ZmKHRoaXMub3B0aW9ucy5vdXRzaWRlQ2xpY2tFdmVudCwgdGhpcy5vdXRzaWRlQ2xpY2tIYW5kbGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdG9nZ2xlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5tZW51QWN0aXZlQ2xhc3MpO1xyXG4gICAgICAgICAgICB0aGlzLm9wZW5lci5vZmYodGhpcy5vcHRpb25zLnRvZ2dsZUV2ZW50LCB0aGlzLmNsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgICAgIHRoaXMucGFnZS5vZmYodGhpcy5vcHRpb25zLm91dHNpZGVDbGlja0V2ZW50LCB0aGlzLm91dHNpZGVDbGlja0hhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdmFyIGFjdGl2YXRlUmVzaXplSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciB3aW4gPSAkKHdpbmRvdyksXHJcbiAgICAgICAgICAgIGRvYyA9ICQoJ2h0bWwnKSxcclxuICAgICAgICAgICAgcmVzaXplQ2xhc3MgPSAncmVzaXplLWFjdGl2ZScsXHJcbiAgICAgICAgICAgIGZsYWcsIHRpbWVyO1xyXG4gICAgICAgIHZhciByZW1vdmVDbGFzc0hhbmRsZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgZmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBkb2MucmVtb3ZlQ2xhc3MocmVzaXplQ2xhc3MpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHJlc2l6ZUhhbmRsZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKCFmbGFnKSB7XHJcbiAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGRvYy5hZGRDbGFzcyhyZXNpemVDbGFzcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcclxuICAgICAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KHJlbW92ZUNsYXNzSGFuZGxlciwgNTAwKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHdpbi5vbigncmVzaXplIG9yaWVudGF0aW9uY2hhbmdlJywgcmVzaXplSGFuZGxlcik7XHJcbiAgICB9O1xyXG5cclxuICAgICQuZm4ubW9iaWxlTmF2ID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSAkLmV4dGVuZCh7fSwgb3B0aW9ucywgeyBjb250YWluZXI6IHRoaXMgfSksXHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IG5ldyBNb2JpbGVOYXYocGFyYW1zKTtcclxuICAgICAgICAgICAgJC5kYXRhKHRoaXMsICdNb2JpbGVOYXYnLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59KGpRdWVyeSkpO1xyXG4iLCIvKlxyXG4gKiBqUXVlcnkgT3Blbi9DbG9zZSBwbHVnaW5cclxuICovXHJcbjsoZnVuY3Rpb24oJCkge1xyXG5cdGZ1bmN0aW9uIE9wZW5DbG9zZShvcHRpb25zKSB7XHJcblx0XHR0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7XHJcblx0XHRcdGFkZENsYXNzQmVmb3JlQW5pbWF0aW9uOiB0cnVlLFxyXG5cdFx0XHRoaWRlT25DbGlja091dHNpZGU6IGZhbHNlLFxyXG5cdFx0XHRhY3RpdmVDbGFzczonYWN0aXZlJyxcclxuXHRcdFx0b3BlbmVyOicub3BlbmVyJyxcclxuXHRcdFx0c2xpZGVyOicuc2xpZGUnLFxyXG5cdFx0XHRhbmltU3BlZWQ6IDQwMCxcclxuXHRcdFx0ZWZmZWN0OidmYWRlJyxcclxuXHRcdFx0ZXZlbnQ6J2NsaWNrJ1xyXG5cdFx0fSwgb3B0aW9ucyk7XHJcblx0XHR0aGlzLmluaXQoKTtcclxuXHR9XHJcblx0T3BlbkNsb3NlLnByb3RvdHlwZSA9IHtcclxuXHRcdGluaXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAodGhpcy5vcHRpb25zLmhvbGRlcikge1xyXG5cdFx0XHRcdHRoaXMuZmluZEVsZW1lbnRzKCk7XHJcblx0XHRcdFx0dGhpcy5hdHRhY2hFdmVudHMoKTtcclxuXHRcdFx0XHR0aGlzLm1ha2VDYWxsYmFjaygnb25Jbml0JywgdGhpcyk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRmaW5kRWxlbWVudHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmhvbGRlciA9ICQodGhpcy5vcHRpb25zLmhvbGRlcik7XHJcblx0XHRcdHRoaXMub3BlbmVyID0gdGhpcy5ob2xkZXIuZmluZCh0aGlzLm9wdGlvbnMub3BlbmVyKTtcclxuXHRcdFx0dGhpcy5zbGlkZXIgPSB0aGlzLmhvbGRlci5maW5kKHRoaXMub3B0aW9ucy5zbGlkZXIpO1xyXG5cdFx0fSxcclxuXHRcdGF0dGFjaEV2ZW50czogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIGFkZCBoYW5kbGVyXHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFx0dGhpcy5ldmVudEhhbmRsZXIgPSBmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdGlmIChzZWxmLnNsaWRlci5oYXNDbGFzcyhzbGlkZUhpZGRlbkNsYXNzKSkge1xyXG5cdFx0XHRcdFx0c2VsZi5zaG93U2xpZGUoKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0c2VsZi5oaWRlU2xpZGUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblx0XHRcdHNlbGYub3BlbmVyLmJpbmQoc2VsZi5vcHRpb25zLmV2ZW50LCB0aGlzLmV2ZW50SGFuZGxlcik7XHJcblxyXG5cdFx0XHQvLyBob3ZlciBtb2RlIGhhbmRsZXJcclxuXHRcdFx0aWYgKHNlbGYub3B0aW9ucy5ldmVudCA9PT0gJ292ZXInKSB7XHJcblx0XHRcdFx0c2VsZi5vcGVuZXIuYmluZCgnbW91c2VlbnRlcicsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0aWYgKCFzZWxmLmhvbGRlci5oYXNDbGFzcyhzZWxmLm9wdGlvbnMuYWN0aXZlQ2xhc3MpKXtcclxuXHRcdFx0XHRcdFx0c2VsZi5zaG93U2xpZGUoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRzZWxmLmhvbGRlci5iaW5kKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRzZWxmLmhpZGVTbGlkZSgpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBvdXRzaWRlIGNsaWNrIGhhbmRsZXJcclxuXHRcdFx0c2VsZi5vdXRzaWRlQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChzZWxmLm9wdGlvbnMuaGlkZU9uQ2xpY2tPdXRzaWRlKSB7XHJcblx0XHRcdFx0XHR2YXIgdGFyZ2V0ID0gJChlLnRhcmdldCk7XHJcblx0XHRcdFx0XHRpZiAoIXRhcmdldC5pcyhzZWxmLmhvbGRlcikgJiYgIXRhcmdldC5jbG9zZXN0KHNlbGYuaG9sZGVyKS5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5oaWRlU2xpZGUoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHQvLyBzZXQgaW5pdGlhbCBzdHlsZXNcclxuXHRcdFx0aWYgKHRoaXMuaG9sZGVyLmhhc0NsYXNzKHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcykpIHtcclxuXHRcdFx0XHQkKGRvY3VtZW50KS5iaW5kKCdjbGljayB0b3VjaHN0YXJ0Jywgc2VsZi5vdXRzaWRlQ2xpY2tIYW5kbGVyKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLnNsaWRlci5hZGRDbGFzcyhzbGlkZUhpZGRlbkNsYXNzKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdHNob3dTbGlkZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFx0aWYgKHNlbGYub3B0aW9ucy5hZGRDbGFzc0JlZm9yZUFuaW1hdGlvbikge1xyXG5cdFx0XHRcdHNlbGYuaG9sZGVyLmFkZENsYXNzKHNlbGYub3B0aW9ucy5hY3RpdmVDbGFzcyk7XHJcblx0XHRcdH1cclxuXHRcdFx0c2VsZi5zbGlkZXIucmVtb3ZlQ2xhc3Moc2xpZGVIaWRkZW5DbGFzcyk7XHJcblx0XHRcdCQoZG9jdW1lbnQpLmJpbmQoJ2NsaWNrIHRvdWNoc3RhcnQnLCBzZWxmLm91dHNpZGVDbGlja0hhbmRsZXIpO1xyXG5cclxuXHRcdFx0c2VsZi5tYWtlQ2FsbGJhY2soJ2FuaW1TdGFydCcsIHRydWUpO1xyXG5cdFx0XHR0b2dnbGVFZmZlY3RzW3NlbGYub3B0aW9ucy5lZmZlY3RdLnNob3coe1xyXG5cdFx0XHRcdGJveDogc2VsZi5zbGlkZXIsXHJcblx0XHRcdFx0c3BlZWQ6IHNlbGYub3B0aW9ucy5hbmltU3BlZWQsXHJcblx0XHRcdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0aWYgKCFzZWxmLm9wdGlvbnMuYWRkQ2xhc3NCZWZvcmVBbmltYXRpb24pIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5ob2xkZXIuYWRkQ2xhc3Moc2VsZi5vcHRpb25zLmFjdGl2ZUNsYXNzKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHNlbGYubWFrZUNhbGxiYWNrKCdhbmltRW5kJywgdHJ1ZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHRoaWRlU2xpZGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdGlmIChzZWxmLm9wdGlvbnMuYWRkQ2xhc3NCZWZvcmVBbmltYXRpb24pIHtcclxuXHRcdFx0XHRzZWxmLmhvbGRlci5yZW1vdmVDbGFzcyhzZWxmLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xyXG5cdFx0XHR9XHJcblx0XHRcdCQoZG9jdW1lbnQpLnVuYmluZCgnY2xpY2sgdG91Y2hzdGFydCcsIHNlbGYub3V0c2lkZUNsaWNrSGFuZGxlcik7XHJcblxyXG5cdFx0XHRzZWxmLm1ha2VDYWxsYmFjaygnYW5pbVN0YXJ0JywgZmFsc2UpO1xyXG5cdFx0XHR0b2dnbGVFZmZlY3RzW3NlbGYub3B0aW9ucy5lZmZlY3RdLmhpZGUoe1xyXG5cdFx0XHRcdGJveDogc2VsZi5zbGlkZXIsXHJcblx0XHRcdFx0c3BlZWQ6IHNlbGYub3B0aW9ucy5hbmltU3BlZWQsXHJcblx0XHRcdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0aWYgKCFzZWxmLm9wdGlvbnMuYWRkQ2xhc3NCZWZvcmVBbmltYXRpb24pIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5ob2xkZXIucmVtb3ZlQ2xhc3Moc2VsZi5vcHRpb25zLmFjdGl2ZUNsYXNzKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHNlbGYuc2xpZGVyLmFkZENsYXNzKHNsaWRlSGlkZGVuQ2xhc3MpO1xyXG5cdFx0XHRcdFx0c2VsZi5tYWtlQ2FsbGJhY2soJ2FuaW1FbmQnLCBmYWxzZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHRkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5zbGlkZXIucmVtb3ZlQ2xhc3Moc2xpZGVIaWRkZW5DbGFzcykuY3NzKHsgZGlzcGxheTonJyB9KTtcclxuXHRcdFx0dGhpcy5vcGVuZXIudW5iaW5kKHRoaXMub3B0aW9ucy5ldmVudCwgdGhpcy5ldmVudEhhbmRsZXIpO1xyXG5cdFx0XHR0aGlzLmhvbGRlci5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpLnJlbW92ZURhdGEoJ09wZW5DbG9zZScpO1xyXG5cdFx0XHQkKGRvY3VtZW50KS51bmJpbmQoJ2NsaWNrIHRvdWNoc3RhcnQnLCB0aGlzLm91dHNpZGVDbGlja0hhbmRsZXIpO1xyXG5cdFx0fSxcclxuXHRcdG1ha2VDYWxsYmFjazogZnVuY3Rpb24obmFtZSkge1xyXG5cdFx0XHRpZiAodHlwZW9mIHRoaXMub3B0aW9uc1tuYW1lXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcclxuXHRcdFx0XHRhcmdzLnNoaWZ0KCk7XHJcblx0XHRcdFx0dGhpcy5vcHRpb25zW25hbWVdLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gYWRkIHN0eWxlc2hlZXQgZm9yIHNsaWRlIG9uIERPTVJlYWR5XHJcblx0dmFyIHNsaWRlSGlkZGVuQ2xhc3MgPSAnanMtc2xpZGUtaGlkZGVuJztcclxuXHQoZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdGFiU3R5bGVTaGVldCA9ICQoJzxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj4nKVswXTtcclxuXHRcdHZhciB0YWJTdHlsZVJ1bGUgPSAnLicgKyBzbGlkZUhpZGRlbkNsYXNzO1xyXG5cdFx0dGFiU3R5bGVSdWxlICs9ICd7cG9zaXRpb246YWJzb2x1dGUgIWltcG9ydGFudDtsZWZ0Oi05OTk5cHggIWltcG9ydGFudDt0b3A6LTk5OTlweCAhaW1wb3J0YW50O2Rpc3BsYXk6YmxvY2sgIWltcG9ydGFudH0nO1xyXG5cdFx0aWYgKHRhYlN0eWxlU2hlZXQuc3R5bGVTaGVldCkge1xyXG5cdFx0XHR0YWJTdHlsZVNoZWV0LnN0eWxlU2hlZXQuY3NzVGV4dCA9IHRhYlN0eWxlUnVsZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRhYlN0eWxlU2hlZXQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGFiU3R5bGVSdWxlKSk7XHJcblx0XHR9XHJcblx0XHQkKCdoZWFkJykuYXBwZW5kKHRhYlN0eWxlU2hlZXQpO1xyXG5cdH0oKSk7XHJcblxyXG5cdC8vIGFuaW1hdGlvbiBlZmZlY3RzXHJcblx0dmFyIHRvZ2dsZUVmZmVjdHMgPSB7XHJcblx0XHRzbGlkZToge1xyXG5cdFx0XHRzaG93OiBmdW5jdGlvbihvKSB7XHJcblx0XHRcdFx0by5ib3guc3RvcCh0cnVlKS5oaWRlKCkuc2xpZGVEb3duKG8uc3BlZWQsIG8uY29tcGxldGUpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRoaWRlOiBmdW5jdGlvbihvKSB7XHJcblx0XHRcdFx0by5ib3guc3RvcCh0cnVlKS5zbGlkZVVwKG8uc3BlZWQsIG8uY29tcGxldGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0ZmFkZToge1xyXG5cdFx0XHRzaG93OiBmdW5jdGlvbihvKSB7XHJcblx0XHRcdFx0by5ib3guc3RvcCh0cnVlKS5oaWRlKCkuZmFkZUluKG8uc3BlZWQsIG8uY29tcGxldGUpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRoaWRlOiBmdW5jdGlvbihvKSB7XHJcblx0XHRcdFx0by5ib3guc3RvcCh0cnVlKS5mYWRlT3V0KG8uc3BlZWQsIG8uY29tcGxldGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0bm9uZToge1xyXG5cdFx0XHRzaG93OiBmdW5jdGlvbihvKSB7XHJcblx0XHRcdFx0by5ib3guaGlkZSgpLnNob3coMCwgby5jb21wbGV0ZSk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGhpZGU6IGZ1bmN0aW9uKG8pIHtcclxuXHRcdFx0XHRvLmJveC5oaWRlKDAsIG8uY29tcGxldGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8galF1ZXJ5IHBsdWdpbiBpbnRlcmZhY2VcclxuXHQkLmZuLm9wZW5DbG9zZSA9IGZ1bmN0aW9uKG9wdCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0alF1ZXJ5KHRoaXMpLmRhdGEoJ09wZW5DbG9zZScsIG5ldyBPcGVuQ2xvc2UoJC5leHRlbmQob3B0LCB7IGhvbGRlcjogdGhpcyB9KSkpO1xyXG5cdFx0fSk7XHJcblx0fTtcclxufShqUXVlcnkpKTtcclxuIiwiLy8gcGFnZSBpbml0XHJcbmpRdWVyeShmdW5jdGlvbigpe1xyXG5cdGluaXRUYWJzKCk7XHJcbn0pO1xyXG5cclxuLy8gY29udGVudCB0YWJzIGluaXRcclxuZnVuY3Rpb24gaW5pdFRhYnMoKSB7XHJcblx0alF1ZXJ5KCd1bC50YWJzZXQnKS50YWJzZXQoe1xyXG5cdFx0dGFiTGlua3M6ICdhJyxcclxuXHRcdGRlZmF1bHRUYWI6IGZhbHNlXHJcblx0fSk7XHJcbn1cclxuXHJcbi8qXHJcbiAqIGpRdWVyeSBUYWJzIHBsdWdpblxyXG4gKi9cclxuXHJcbjsoZnVuY3Rpb24oJCwgJHdpbikge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0ZnVuY3Rpb24gVGFic2V0KCRob2xkZXIsIG9wdGlvbnMpIHtcclxuXHRcdHRoaXMuJGhvbGRlciA9ICRob2xkZXI7XHJcblx0XHR0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG5cclxuXHRcdHRoaXMuaW5pdCgpO1xyXG5cdFx0dGhpcy5tYWtlQ2FsbGJhY2soJ29uSW5pdCcsIHRoaXMpO1xyXG5cdH1cclxuXHJcblx0VGFic2V0LnByb3RvdHlwZSA9IHtcclxuXHRcdGluaXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLiR0YWJMaW5rcyA9IHRoaXMuJGhvbGRlci5maW5kKHRoaXMub3B0aW9ucy50YWJMaW5rcyk7XHJcblxyXG5cdFx0XHR0aGlzLnNldFN0YXJ0QWN0aXZlSW5kZXgoKTtcclxuXHRcdFx0dGhpcy5zZXRBY3RpdmVUYWIoKTtcclxuXHJcblx0XHRcdGlmICh0aGlzLm9wdGlvbnMuYXV0b0hlaWdodCkge1xyXG5cdFx0XHRcdHRoaXMuJHRhYkhvbGRlciA9ICQodGhpcy4kdGFiTGlua3MuZXEoMCkuYXR0cih0aGlzLm9wdGlvbnMuYXR0cmliKSkucGFyZW50KCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0c2V0U3RhcnRBY3RpdmVJbmRleDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciAkY2xhc3NUYXJnZXRzID0gdGhpcy5nZXRDbGFzc1RhcmdldCh0aGlzLiR0YWJMaW5rcyk7XHJcblx0XHRcdHZhciAkYWN0aXZlTGluayA9ICRjbGFzc1RhcmdldHMuZmlsdGVyKCcuJyArIHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyk7XHJcblx0XHRcdHZhciAkaGFzaExpbmsgPSB0aGlzLiR0YWJMaW5rcy5maWx0ZXIoJ1snICsgdGhpcy5vcHRpb25zLmF0dHJpYiArICc9XCInICsgbG9jYXRpb24uaGFzaCArICdcIl0nKTtcclxuXHRcdFx0dmFyIGFjdGl2ZUluZGV4O1xyXG5cclxuXHRcdFx0aWYgKHRoaXMub3B0aW9ucy5jaGVja0hhc2ggJiYgJGhhc2hMaW5rLmxlbmd0aCkge1xyXG5cdFx0XHRcdCRhY3RpdmVMaW5rID0gJGhhc2hMaW5rO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRhY3RpdmVJbmRleCA9ICRjbGFzc1RhcmdldHMuaW5kZXgoJGFjdGl2ZUxpbmspO1xyXG5cclxuXHRcdFx0dGhpcy5hY3RpdmVUYWJJbmRleCA9IHRoaXMucHJldlRhYkluZGV4ID0gKGFjdGl2ZUluZGV4ID09PSAtMSA/ICh0aGlzLm9wdGlvbnMuZGVmYXVsdFRhYiA/IDAgOiBudWxsKSA6IGFjdGl2ZUluZGV4KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0c2V0QWN0aXZlVGFiOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdFx0dGhpcy4kdGFiTGlua3MuZWFjaChmdW5jdGlvbihpLCBsaW5rKSB7XHJcblx0XHRcdFx0dmFyICRsaW5rID0gJChsaW5rKTtcclxuXHRcdFx0XHR2YXIgJGNsYXNzVGFyZ2V0ID0gc2VsZi5nZXRDbGFzc1RhcmdldCgkbGluayk7XHJcblx0XHRcdFx0dmFyICR0YWIgPSAkKCRsaW5rLmF0dHIoc2VsZi5vcHRpb25zLmF0dHJpYikpO1xyXG5cclxuXHRcdFx0XHRpZiAoaSAhPT0gc2VsZi5hY3RpdmVUYWJJbmRleCkge1xyXG5cdFx0XHRcdFx0JGNsYXNzVGFyZ2V0LnJlbW92ZUNsYXNzKHNlbGYub3B0aW9ucy5hY3RpdmVDbGFzcyk7XHJcblx0XHRcdFx0XHQkdGFiLmFkZENsYXNzKHNlbGYub3B0aW9ucy50YWJIaWRkZW5DbGFzcykucmVtb3ZlQ2xhc3Moc2VsZi5vcHRpb25zLmFjdGl2ZUNsYXNzKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JGNsYXNzVGFyZ2V0LmFkZENsYXNzKHNlbGYub3B0aW9ucy5hY3RpdmVDbGFzcyk7XHJcblx0XHRcdFx0XHQkdGFiLnJlbW92ZUNsYXNzKHNlbGYub3B0aW9ucy50YWJIaWRkZW5DbGFzcykuYWRkQ2xhc3Moc2VsZi5vcHRpb25zLmFjdGl2ZUNsYXNzKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHNlbGYuYXR0YWNoVGFiTGluaygkbGluaywgaSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRhdHRhY2hUYWJMaW5rOiBmdW5jdGlvbigkbGluaywgaSkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0XHQkbGluay5vbih0aGlzLm9wdGlvbnMuZXZlbnQgKyAnLnRhYnNldCcsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHRcdGlmIChzZWxmLmFjdGl2ZVRhYkluZGV4ID09PSBzZWxmLnByZXZUYWJJbmRleCAmJiBzZWxmLmFjdGl2ZVRhYkluZGV4ICE9PSBpKSB7XHJcblx0XHRcdFx0XHRzZWxmLmFjdGl2ZVRhYkluZGV4ID0gaTtcclxuXHRcdFx0XHRcdHNlbGYuc3dpdGNoVGFicygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHJlc2l6ZUhvbGRlcjogZnVuY3Rpb24oaGVpZ2h0KSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRcdGlmIChoZWlnaHQpIHtcclxuXHRcdFx0XHR0aGlzLiR0YWJIb2xkZXIuaGVpZ2h0KGhlaWdodCk7XHJcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHNlbGYuJHRhYkhvbGRlci5hZGRDbGFzcygndHJhbnNpdGlvbicpO1xyXG5cdFx0XHRcdH0sIDEwKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRzZWxmLiR0YWJIb2xkZXIucmVtb3ZlQ2xhc3MoJ3RyYW5zaXRpb24nKS5oZWlnaHQoJycpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdHN3aXRjaFRhYnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0XHR2YXIgJHByZXZMaW5rID0gdGhpcy4kdGFiTGlua3MuZXEodGhpcy5wcmV2VGFiSW5kZXgpO1xyXG5cdFx0XHR2YXIgJG5leHRMaW5rID0gdGhpcy4kdGFiTGlua3MuZXEodGhpcy5hY3RpdmVUYWJJbmRleCk7XHJcblxyXG5cdFx0XHR2YXIgJHByZXZUYWIgPSB0aGlzLmdldFRhYigkcHJldkxpbmspO1xyXG5cdFx0XHR2YXIgJG5leHRUYWIgPSB0aGlzLmdldFRhYigkbmV4dExpbmspO1xyXG5cclxuXHRcdFx0JHByZXZUYWIucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKTtcclxuXHJcblx0XHRcdGlmIChzZWxmLmhhdmVUYWJIb2xkZXIoKSkge1xyXG5cdFx0XHRcdHRoaXMucmVzaXplSG9sZGVyKCRwcmV2VGFiLm91dGVySGVpZ2h0KCkpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHNlbGYuZ2V0Q2xhc3NUYXJnZXQoJHByZXZMaW5rKS5yZW1vdmVDbGFzcyhzZWxmLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xyXG5cclxuXHRcdFx0XHQkcHJldlRhYi5hZGRDbGFzcyhzZWxmLm9wdGlvbnMudGFiSGlkZGVuQ2xhc3MpO1xyXG5cdFx0XHRcdCRuZXh0VGFiLnJlbW92ZUNsYXNzKHNlbGYub3B0aW9ucy50YWJIaWRkZW5DbGFzcykuYWRkQ2xhc3Moc2VsZi5vcHRpb25zLmFjdGl2ZUNsYXNzKTtcclxuXHJcblx0XHRcdFx0c2VsZi5nZXRDbGFzc1RhcmdldCgkbmV4dExpbmspLmFkZENsYXNzKHNlbGYub3B0aW9ucy5hY3RpdmVDbGFzcyk7XHJcblxyXG5cdFx0XHRcdGlmIChzZWxmLmhhdmVUYWJIb2xkZXIoKSkge1xyXG5cdFx0XHRcdFx0c2VsZi5yZXNpemVIb2xkZXIoJG5leHRUYWIub3V0ZXJIZWlnaHQoKSk7XHJcblxyXG5cdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5yZXNpemVIb2xkZXIoKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5wcmV2VGFiSW5kZXggPSBzZWxmLmFjdGl2ZVRhYkluZGV4O1xyXG5cdFx0XHRcdFx0fSwgc2VsZi5vcHRpb25zLmFuaW1TcGVlZCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHNlbGYucHJldlRhYkluZGV4ID0gc2VsZi5hY3RpdmVUYWJJbmRleDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gb25jaGFuZ2UgY2FsbGJhY2tcclxuXHRcdFx0XHRzZWxmLm1ha2VDYWxsYmFjaygnb25DaGFuZ2UnLCBzZWxmLCAkbmV4dExpbmspO1xyXG5cdFx0XHR9LCB0aGlzLm9wdGlvbnMuYXV0b0hlaWdodCA/IHRoaXMub3B0aW9ucy5hbmltU3BlZWQgOiAxKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Z2V0Q2xhc3NUYXJnZXQ6IGZ1bmN0aW9uKCRsaW5rKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLm9wdGlvbnMuYWRkVG9QYXJlbnQgPyAkbGluay5wYXJlbnQoKSA6ICRsaW5rO1xyXG5cdFx0fSxcclxuXHJcblx0XHRnZXRBY3RpdmVUYWI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5nZXRUYWIodGhpcy4kdGFiTGlua3MuZXEodGhpcy5hY3RpdmVUYWJJbmRleCkpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRnZXRUYWI6IGZ1bmN0aW9uKCRsaW5rKSB7XHJcblx0XHRcdHJldHVybiAkKCRsaW5rLmF0dHIodGhpcy5vcHRpb25zLmF0dHJpYikpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRoYXZlVGFiSG9sZGVyOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuJHRhYkhvbGRlciAmJiB0aGlzLiR0YWJIb2xkZXIubGVuZ3RoO1xyXG5cdFx0fSxcclxuXHJcblx0XHRtYWtlQ2FsbGJhY2s6IGZ1bmN0aW9uKG5hbWUpIHtcclxuXHRcdFx0aWYodHlwZW9mIHRoaXMub3B0aW9uc1tuYW1lXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcclxuXHRcdFx0XHRhcmdzLnNoaWZ0KCk7XHJcblx0XHRcdFx0dGhpcy5vcHRpb25zW25hbWVdLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0XHR0aGlzLiR0YWJMaW5rcy5vZmYoJy50YWJzZXQnKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciAkbGluayA9ICQodGhpcyk7XHJcblxyXG5cdFx0XHRcdHNlbGYuZ2V0Q2xhc3NUYXJnZXQoJGxpbmspLnJlbW92ZUNsYXNzKHNlbGYub3B0aW9ucy5hY3RpdmVDbGFzcyk7XHJcblx0XHRcdFx0JCgkbGluay5hdHRyKHNlbGYub3B0aW9ucy5hdHRyaWIpKS5yZW1vdmVDbGFzcyhzZWxmLm9wdGlvbnMuYWN0aXZlQ2xhc3MgKyAnICcgKyBzZWxmLm9wdGlvbnMudGFiSGlkZGVuQ2xhc3MpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMuJGhvbGRlci5yZW1vdmVEYXRhKCdUYWJzZXQnKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQkLmZuLnRhYnNldCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuXHRcdG9wdGlvbnMgPSAkLmV4dGVuZCh7XHJcblx0XHRcdGFjdGl2ZUNsYXNzOiAnYWN0aXZlJyxcclxuXHRcdFx0YWRkVG9QYXJlbnQ6IGZhbHNlLFxyXG5cdFx0XHRhdXRvSGVpZ2h0OiBmYWxzZSxcclxuXHRcdFx0Y2hlY2tIYXNoOiBmYWxzZSxcclxuXHRcdFx0ZGVmYXVsdFRhYjogdHJ1ZSxcclxuXHRcdFx0YW5pbVNwZWVkOiA1MDAsXHJcblx0XHRcdHRhYkxpbmtzOiAnYScsXHJcblx0XHRcdGF0dHJpYjogJ2hyZWYnLFxyXG5cdFx0XHRldmVudDogJ2NsaWNrJyxcclxuXHRcdFx0dGFiSGlkZGVuQ2xhc3M6ICdqcy10YWItaGlkZGVuJ1xyXG5cdFx0fSwgb3B0aW9ucyk7XHJcblx0XHRvcHRpb25zLmF1dG9IZWlnaHQgPSBvcHRpb25zLmF1dG9IZWlnaHQgJiYgJC5zdXBwb3J0Lm9wYWNpdHk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyICRob2xkZXIgPSAkKHRoaXMpO1xyXG5cclxuXHRcdFx0aWYgKCEkaG9sZGVyLmRhdGEoJ1RhYnNldCcpKSB7XHJcblx0XHRcdFx0JGhvbGRlci5kYXRhKCdUYWJzZXQnLCBuZXcgVGFic2V0KCRob2xkZXIsIG9wdGlvbnMpKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fTtcclxufShqUXVlcnksIGpRdWVyeSh3aW5kb3cpKSk7Il19
